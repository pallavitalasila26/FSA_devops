#!/bin/bash

# Check if repository URL was provided as argument
if [ $# -eq 0 ]; then
    echo "Error: No repository URL provided"
    echo "Usage: $0 <repository-url>"
    echo "Example: $0 https://github.com/username/repo.git"
    exit 1
fi

REPO_URL="$1"

# Remove any existing Course directories
rm -r Course_0*

# Download and run the Git LFS installation script
curl -s https://packagecloud.io/install/repositories/github/git-lfs/script.deb.sh | sudo bash

# Install Git LFS package
sudo apt install -y git-lfs

# Set up Git LFS in the user's Git configuration
git lfs install

# Initialize a new Git repository in the current directory
git init

# Configure Git to cache credentials in memory (default 15 minutes)
git config credential.helper cache

# Add the remote repository URL
git remote add origin "$REPO_URL"

# Pull the latest changes from the main branch
git pull origin main